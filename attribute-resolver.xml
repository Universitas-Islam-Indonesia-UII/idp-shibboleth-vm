<?xml version="1.0" encoding="UTF-8"?>
<AttributeResolver
  xmlns="urn:mace:shibboleth:2.0:resolver"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="urn:mace:shibboleth:2.0:resolver http://shibboleth.net/schema/idp/shibboleth-attribute-resolver.xsd">

  <!-- ========================================== -->
  <!--           Attribute Definitions            -->
  <!-- ========================================== -->
  <AttributeDefinition id="uid" xsi:type="Simple">
    <InputDataConnector ref="myLDAP" attributeNames="sAMAccountName"/>
    <AttributeEncoder xsi:type="SAML1String" name="urn:mace:dir:attribute-def:uid" encodeType="false" />
    <AttributeEncoder xsi:type="SAML2String" name="urn:oid:0.9.2342.19200300.100.1.1" friendlyName="sAMAccountName" encodeType="false" />
  </AttributeDefinition>
  <AttributeDefinition xsi:type="Simple" id="mail">
    <InputDataConnector ref="myLDAP" attributeNames="mail"/>
    <AttributeEncoder xsi:type="SAML1String" name="urn:mace:dir:attribute-def:mail" encodeType="false" />
    <AttributeEncoder xsi:type="SAML2String" name="urn:oid:0.9.2342.19200300.100.1.3" friendlyName="mail" encodeType="false" />
  </AttributeDefinition>
  <AttributeDefinition xsi:type="Simple" id="displayName">
    <InputDataConnector ref="myLDAP" attributeNames="displayName"/>
    <AttributeEncoder xsi:type="SAML1String" name="urn:mace:dir:attribute-def:displayName" encodeType="false" />
    <AttributeEncoder xsi:type="SAML2String" name="urn:oid:2.16.840.1.113730.3.1.241" friendlyName="displayName" encodeType="false" />
  </AttributeDefinition>
  <AttributeDefinition xsi:type="Simple" id="memberOf">
    <InputDataConnector ref="myLDAP" attributeNames="memberOf"/>
    <AttributeEncoder xsi:type="SAML1String" name="urn:mace:dir:attribute-def:memberOf" encodeType="false" />
    <AttributeEncoder xsi:type="SAML2String" name="urn:oid:1.3.6.1.4.1.11023.1.1.7.2.1.11" friendlyName="memberOf" encodeType="false" />
  </AttributeDefinition>

  <AttributeDefinition xsi:type="Simple" id="eduPersonOrgUnitDN">
    <InputDataConnector ref="mysql" attributeNames="distinguishedName"/>
    <AttributeEncoder xsi:type="SAML1String" name="urn:mace:dir:attribute-def:eduPersonOrgUnitDN" encodeType="false" />
    <AttributeEncoder xsi:type="SAML2String" name="urn:oid:1.3.6.1.4.1.5923.1.1.1.4" friendlyName="eduPersonOrgUnitDN" encodeType="false" />
  </AttributeDefinition>



  <!-- ========================================== -->
  <!--	Active Directory Connectors               -->
  <!-- ========================================== -->
  <DataConnector id="myLDAP" xsi:type="LDAPDirectory"
    ldapURL="%{idp.attribute.resolver.LDAP.ldapURL}"
    baseDN="%{idp.attribute.resolver.LDAP.baseDN}"
    principal="%{idp.attribute.resolver.LDAP.bindDN}"
    principalCredential="%{idp.attribute.resolver.LDAP.bindDNCredential}">
    <FilterTemplate>
      <![CDATA[
        %{idp.attribute.resolver.LDAP.searchFilter}
      ]]>
    </FilterTemplate>
    <BinaryAttributes>objectGUID</BinaryAttributes>
  </DataConnector>
</AttributeResolver>
